import{r as d,j as e}from"./vendor-react-395Lia7H.js";import{V as g}from"./AgBiz-YOyrjYBF.js";import{N as f}from"./layout/NavigationConstants.ts-u_-dkTAV.js";import{T as v}from"./layout/ThemeToggleButton-DAxRks1s.js";import{A as b,m as y}from"./vendor-framer-motion-BbJ18gRY.js";import{s as N,t as j}from"./vendor-lucide-react-Cxzx__9e.js";const k=d.createContext(void 0),O=({children:a})=>{const[o,n]=d.useState(()=>{const r=localStorage.getItem("ea_cart");return r?JSON.parse(r):[]});d.useEffect(()=>{localStorage.setItem("ea_cart",JSON.stringify(o))},[o]);const l=r=>{n(s=>s.find(t=>t.id===r.id)?s.map(t=>t.id===r.id?{...t,quantity:t.quantity+1}:t):[...s,{...r,quantity:1}])},c=r=>{n(s=>s.filter(i=>i.id!==r))},x=(r,s)=>{if(s<=0){c(r);return}n(i=>i.map(t=>t.id===r?{...t,quantity:s}:t))},h=()=>n([]),u=o.reduce((r,s)=>r+s.quantity,0),p=o.reduce((r,s)=>{const i=parseFloat(s.price.replace(/[^0-9.]/g,""));return r+i*s.quantity},0);return e.jsx(k.Provider,{value:{cart:o,addToCart:l,removeFromCart:c,updateQuantity:x,clearCart:h,totalItems:u,totalPrice:p},children:a})},C=()=>{const a=d.useContext(k);if(a===void 0)throw new Error("useCart must be used within a CartProvider");return a},M=({items:a,onNavigate:o,closeMenu:n})=>e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute left-0 mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-xl",children:e.jsx("ul",{className:"py-2",children:a.map((l,c)=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>{o(l.view),n()},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx(l.icon,{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-agro-600"}),e.jsx("span",{children:l.label})]})},c))})}),R=({onNavigate:a,currentView:o})=>{const[n,l]=d.useState(null),[c,x]=d.useState(!1),h=d.useRef(null),{totalItems:u}=C(),p=t=>{l(n===t?null:t)},r=t=>{t.view&&a(t.view),t.subItems?p(t.label):i()},s=t=>{h.current&&!h.current.contains(t.target)&&(l(null),x(!1))};d.useEffect(()=>(document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}),[]);const i=()=>{x(!1),l(null)};return e.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-white/5 w-full sticky top-0 z-50 transition-all",ref:h,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 group cursor-pointer",onClick:()=>a(g.HOME),children:[e.jsx("div",{className:"bg-agro-600 p-2 rounded-xl text-white shadow-lg shadow-agro-600/20 group-hover:scale-110 transition-transform",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"}),e.jsx("path",{d:"M2 21c0-3 1.85-5.36 5.08-6C10.9 14.19 12 15 15 15"})]})}),e.jsx("span",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tighter",children:"EnvirosAgro"})]}),e.jsx("div",{className:"hidden xl:block",children:e.jsx("ul",{className:"flex items-center space-x-1",children:f.map(t=>e.jsxs("li",{className:"relative",children:[e.jsx("button",{onClick:()=>r(t),className:`flex items-center text-gray-600 dark:text-gray-400 hover:text-agro-700 dark:hover:text-agro-400 px-4 py-2 rounded-xl text-sm font-bold transition-all ${o===t.view?"text-agro-600 bg-agro-50 dark:bg-agro-900/20":""}`,children:e.jsx("span",{children:t.label})}),e.jsx(b,{children:n===t.label&&t.subItems&&e.jsx(M,{items:t.subItems,onNavigate:a,closeMenu:()=>l(null)})})]},t.label))})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{}),e.jsxs("button",{onClick:()=>a(g.CART),className:"relative p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:[e.jsx(N,{size:22}),u>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-agro-600 text-white text-[10px] font-black w-5 h-5 flex items-center justify-center rounded-full border-2 border-white dark:border-gray-900",children:u})]}),e.jsxs("button",{onClick:()=>a(g.AUTH),className:"hidden sm:flex items-center gap-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl shadow-gray-900/10 dark:shadow-white/5",children:[e.jsx(j,{size:16})," Sign Up"]}),e.jsx("div",{className:"xl:hidden",children:e.jsxs("button",{onClick:()=>x(!c),className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),e.jsx("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:c?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})]})})]})]})}),e.jsx(b,{children:c&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"xl:hidden bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-white/5 overflow-hidden",children:e.jsxs("ul",{className:"px-4 pt-4 pb-8 space-y-2",children:[f.map(t=>e.jsxs("li",{children:[e.jsxs("button",{onClick:()=>r(t),className:`w-full text-left flex items-center justify-between text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 px-4 py-3 rounded-xl text-sm font-bold transition-all ${o===t.view?"bg-agro-50 text-agro-600 dark:bg-agro-900/20":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{children:t.label})]}),t.subItems&&e.jsx("svg",{className:`w-4 h-4 transition-transform ${n===t.label?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx(b,{children:n===t.label&&t.subItems&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsx("ul",{className:"py-2 pl-8 space-y-1",children:t.subItems.map((m,w)=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>{a(m.view),i()},className:"flex items-center w-full text-left px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400 hover:text-agro-600 dark:hover:text-agro-400 transition-colors font-medium",children:[e.jsx(m.icon,{className:"w-4 h-4 mr-3 opacity-50"}),e.jsx("span",{children:m.label})]})},w))})})})]},t.label)),e.jsx("li",{className:"pt-4",children:e.jsxs("button",{onClick:()=>{a(g.AUTH),i()},className:"w-full bg-agro-600 text-white py-4 rounded-xl text-xs font-black uppercase tracking-widest flex items-center justify-center gap-3",children:[e.jsx(j,{size:18})," Sign Up for ESIN"]})})]})})})]})};export{O as C,R as N};
