import{j as e,r as s}from"./vendor-react-BGx942Si.js";import{d as k,s as F,V as A}from"./index-C-1zQQg8.js";import{U as S,ap as U,aq as v,ar as M,as as V,J as I,at as H,au as $,w as D,av as O,aw as B,ax as q,ay as J,az as W,I as _,q as N,a6 as Y,aA as K,aB as Q,aC as X,Y as Z,aD as z,aE as ee,G as te,f as ae,i as se}from"./vendor-lucide-react-NGePLrkP.js";import{C as re}from"./Cta-tQ5Oj7oI.js";import{q as ie,l as le,e as ne,f as C,h as oe,T as E,j as G,k as de,u as ce,m as xe,s as he}from"./vendor-@firebase-5Fy99INn.js";import{A as w,m as y}from"./vendor-framer-motion-C191hJYY.js";import"./vendor-cookie-CqkleIqs.js";import"./vendor-react-dom-Brjc5KXW.js";import"./vendor-scheduler-CoSDG3-6.js";import"./vendor-react-router-rITc8dcL.js";import"./vendor-firebase-cZpHEMZg.js";import"./vendor-motion-dom-C9W8je_5.js";import"./vendor-motion-utils-CjIqCkNq.js";import"./vendor-idb-BXWtuYvb.js";const me=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 pt-16 text-center",children:[e.jsx(S,{className:"mx-auto h-16 w-16 text-green-600 bg-gray-100 dark:bg-gray-700 p-3 rounded-full"}),e.jsx("h1",{className:"mt-4 text-4xl font-extrabold text-gray-900 dark:text-white sm:text-5xl",children:"Community Hub"}),e.jsx("p",{className:"mt-4 max-w-3xl mx-auto text-xl text-gray-500 dark:text-gray-400",children:"Connect, share, and learn with fellow agricultural pioneers. A space for discussion, collaboration, and knowledge exchange."})]}),ge=[{id:"T001",title:"What are your go-to methods for soil moisture testing?",category:"Precision Agriculture",author:{name:"Dr. Eleanor Vance",avatar:"/images/avatars/eleanor-vance.jpg"},stats:{replies:42,views:1800,participants:15},lastActivity:"3 hours ago",isTrending:!0,tags:["soil","moisture","testing","sensors"],participants:[{name:"Sam Wilson",avatar:"/images/avatars/sam-wilson.jpg"},{name:"Jane Doe",avatar:"/images/avatars/jane-doe.jpg"},{name:"Peter Jones",avatar:"/images/avatars/peter-jones.jpg"}]},{id:"T002",title:"Best crop choices for vertical farming setups?",category:"Urban Farming",author:{name:"Marco Diaz",avatar:"/images/avatars/marco-diaz.jpg"},stats:{replies:28,views:1200,participants:10},lastActivity:"1 day ago",isTrending:!1,tags:["vertical-farming","hydroponics","crop-selection"],participants:[{name:"Emily Carter",avatar:"/images/avatars/emily-carter.jpg"},{name:"Chris Lee",avatar:"/images/avatars/chris-lee.jpg"}]},{id:"T003",title:"The ROI of drone-based pesticide spraying: A case study",category:"Agri-Tech",author:{name:"Chen Liang",avatar:"/images/avatars/chen-liang.jpg"},stats:{replies:65,views:3200,participants:25},lastActivity:"5 hours ago",isTrending:!0,tags:["drones","agri-tech","roi","case-study"],participants:[{name:"Dr. Alan Grant",avatar:"/images/avatars/alan-grant.jpg"},{name:"Sarah Jenkins",avatar:"/images/avatars/sarah-jenkins.jpg"},{name:"Tom Howard",avatar:"/images/avatars/tom-howard.jpg"}]},{id:"T004",title:"Organic vs. Synthetic Fertilizers: A Heated Debate",category:"Sustainable Practices",author:{name:"Sarah Jenkins",avatar:"/images/avatars/sarah-jenkins.jpg"},stats:{replies:112,views:5600,participants:48},lastActivity:"2 days ago",isTrending:!1,tags:["organic","fertilizers","sustainability"],participants:[{name:"Dr. Eleanor Vance",avatar:"/images/avatars/eleanor-vance.jpg"},{name:"Marco Diaz",avatar:"/images/avatars/marco-diaz.jpg"}]},{id:"T005",title:"DIY automated irrigation systems for small-scale farms",category:"DIY & Innovation",author:{name:"Tom Howard",avatar:"/images/avatars/tom-howard.jpg"},stats:{replies:76,views:4100,participants:32},lastActivity:"8 hours ago",isTrending:!0,tags:["diy","automation","irrigation"],participants:[{name:"Chen Liang",avatar:"/images/avatars/chen-liang.jpg"}]}],pe=[{id:1,name:"Dr. Eleanor Vance",title:"Soil Scientist",avatar:"/images/avatars/eleanor-vance.jpg",contributions:134,specialty:"Soil Health"},{id:2,name:"Chen Liang",title:"Agri-Tech Entrepreneur",avatar:"/images/avatars/chen-liang.jpg",contributions:98,specialty:"Drones & AI"},{id:3,name:"Sarah Jenkins",title:"Organic Farmer",avatar:"/images/avatars/sarah-jenkins.jpg",contributions:210,specialty:"Sustainable Farming"},{id:4,name:"Marco Diaz",title:"Vertical Farming Specialist",avatar:"/images/avatars/marco-diaz.jpg",contributions:75,specialty:"Urban Agriculture"}],ue=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Hot Topics in the Forum"}),e.jsx("div",{className:"space-y-4",children:ge.map(t=>e.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"h-10 w-10 rounded-full mr-4"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:t.category}),t.isTrending&&e.jsxs("span",{className:"flex items-center text-sm font-semibold text-orange-500 bg-orange-100 dark:bg-orange-900/50 px-2 py-1 rounded-full",children:[e.jsx(U,{size:14,className:"mr-1"})," Trending"]})]}),e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mt-1 cursor-pointer hover:text-green-600",children:t.title}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-2",children:[e.jsxs("p",{children:["by ",e.jsx("span",{className:"font-semibold",children:t.author.name})]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{size:14,className:"mr-1.5"}),e.jsxs("span",{children:[t.stats.replies," replies"]})]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("p",{children:["Last reply ",t.lastActivity]})]})]})]})},t.id))}),e.jsx("button",{className:"w-full mt-6 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition",children:"View All Discussions"})]}),be=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Top Contributors"}),e.jsx("div",{className:"space-y-5",children:pe.map(t=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"h-14 w-14 rounded-full"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.title}),e.jsxs("div",{className:"flex items-center text-sm mt-1 text-green-600 dark:text-green-400",children:[e.jsx(M,{size:14,className:"mr-1.5"}),e.jsx("span",{className:"font-semibold",children:t.specialty})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-xl text-gray-800 dark:text-white",children:t.contributions}),e.jsx("p",{className:"text-xs text-gray-500",children:"posts"})]})]},t.id))}),e.jsx("button",{className:"w-full mt-6 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-bold py-3 px-6 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:"Become a Contributor"})]}),fe=()=>{const[t,i]=s.useState([]),[d,c]=s.useState(!0);s.useEffect(()=>{const a=ie(C(k,"news"),ne("timestamp","desc"),le(5)),n=oe(a,x=>{const h=x.docs.map(p=>({id:p.id,...p.data()}));i(h),c(!1)});return()=>n()},[]);const r=[{id:"1",title:"Cluster Alpha Achieves +15% Soil Integrity",excerpt:"Recent results from the EA Thrust implementation in the Central Highlands show a significant uptick in microbial activity.",category:"ENVIRONMENTAL",author:"Lead Node Analyst",timestamp:E.now()},{id:"2",title:"ScaleUp Summit 2024: Registration Open",excerpt:"Secure your delegation seat for the biggest industrial agriculture event of the year.",category:"INDUSTRIAL",author:"Events Terminal",timestamp:E.now()}],l=t.length>0?t:r;return e.jsxs("div",{className:"bg-white dark:bg-earth-900 rounded-[2.5rem] p-8 md:p-10 border border-earth-100 dark:border-earth-800 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h2",{className:"text-2xl font-serif font-black text-earth-900 dark:text-white flex items-center gap-3",children:[e.jsx(V,{className:"text-agro-600"})," Ecosystem Dispatch"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("span",{className:"bg-agro-50 dark:bg-agro-900/30 text-agro-600 px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border border-agro-100 dark:border-agro-800",children:"Live Link"})})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(w,{mode:"popLayout",children:l.map((a,n)=>e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"group border-b border-earth-50 dark:border-earth-800 last:border-0 pb-6 last:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`text-[8px] font-black px-2 py-0.5 rounded uppercase tracking-widest ${a.category==="ENVIRONMENTAL"?"bg-green-50 text-green-600 border border-green-100":a.category==="INDUSTRIAL"?"bg-slate-50 text-slate-600 border border-slate-100":"bg-blue-50 text-blue-600 border border-blue-100"}`,children:a.category}),e.jsxs("span",{className:"text-[10px] text-earth-400 font-medium flex items-center gap-1",children:[e.jsx(I,{size:12})," ",a.timestamp.toDate().toLocaleDateString()]})]}),e.jsx("h3",{className:"text-lg font-bold text-earth-900 dark:text-white group-hover:text-agro-600 transition-colors leading-tight mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-earth-500 dark:text-earth-400 line-clamp-2 leading-relaxed",children:a.excerpt}),e.jsxs("button",{className:"mt-4 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-agro-600 hover:underline",children:["Read Analysis ",e.jsx(H,{size:12})]})]},a.id))})}),d&&t.length===0&&e.jsxs("div",{className:"py-10 text-center flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-earth-100 border-t-agro-500 rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black text-earth-400 uppercase tracking-[0.3em]",children:"Synchronizing Stream..."})]})]})},je=[{title:"Sustainable Farming Workshop",date:"AUG 15",time:"10:00 AM - 1:00 PM",location:"Online Webinar"},{title:"Community Garden Harvest Day",date:"AUG 22",time:"9:00 AM onwards",location:"Greenfield Community Garden"},{title:"Agri-Tech Expo 2024",date:"SEP 05",time:"All Day Event",location:"National Convention Center"}],T=()=>e.jsxs("div",{className:"bg-white dark:bg-earth-800 rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"font-bold text-xl text-earth-900 dark:text-white flex items-center gap-2",children:[e.jsx(S,{size:24,className:"text-agro-500"}),"Upcoming Events"]}),e.jsx("p",{className:"text-sm text-earth-600 dark:text-earth-400",children:"Connect with the community and grow your knowledge."})]}),e.jsx("div",{className:"space-y-2 px-2",children:je.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg hover:bg-earth-50 dark:hover:bg-earth-700/50 transition-colors",children:[e.jsxs("div",{className:"bg-agro-100 dark:bg-agro-900/50 text-agro-600 dark:text-agro-300 font-bold rounded-lg p-3 text-center w-16 flex-shrink-0",children:[e.jsx("p",{className:"text-xs",children:t.date.split(" ")[0]}),e.jsx("p",{className:"text-2xl",children:t.date.split(" ")[1]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-earth-800 dark:text-white leading-tight",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-earth-500 dark:text-earth-400 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{size:12}),e.jsx("span",{children:t.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{size:12}),e.jsx("span",{children:t.location})]})]})]})]},i))}),e.jsx("div",{className:"p-4 bg-earth-50 dark:bg-earth-800/50 mt-2",children:e.jsxs("button",{className:"w-full text-center text-sm font-bold text-agro-600 dark:text-agro-400 hover:text-agro-700 dark:hover:text-agro-300 flex items-center justify-center gap-1",children:["View all events ",e.jsx(D,{size:16})]})})]}),ve=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Member Spotlight"}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"A featured community member will be displayed here."})})]}),Ne=({esinStep:t,setEsinStep:i,setActiveTab:d,onEsinGenerated:c})=>{const r=`EA-FAR-2024-${Math.floor(1e3+Math.random()*9e3)}`,l=()=>{c(r),i(1),d("ID_CARD")};return e.jsx("div",{className:"max-w-xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"bg-white dark:bg-earth-900 rounded-[2rem] shadow-sm border border-earth-100 dark:border-earth-800 overflow-hidden",children:[e.jsx("div",{className:"bg-agro-900 p-6 text-white text-center",children:e.jsxs("h3",{className:"text-xl font-serif font-bold flex items-center justify-center gap-3",children:[e.jsx(O,{size:20})," Issuance Terminal"]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between relative mb-8 px-4",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-earth-100 dark:bg-earth-800 -z-10 -translate-y-1/2"}),[1,2,3].map(a=>e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-[10px] border-2 z-10 transition-all ${t>=a?"bg-agro-600 border-agro-600 text-white":"bg-white dark:bg-earth-800 border-earth-100 dark:border-earth-800 text-earth-300"}`,children:a},a))]}),t===1&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-2 text-center",children:[e.jsx("h4",{className:"font-bold text-base text-slate-900 dark:text-white",children:"Identity Verification"}),e.jsx("p",{className:"text-xs text-earth-500 dark:text-earth-400",children:"Linking sustainability efforts across Five Thrusts."}),e.jsx("button",{onClick:()=>i(2),className:"w-full bg-agro-600 text-white font-black py-3 rounded-xl text-[9px] uppercase tracking-widest",children:"Start Verification"})]}),t===2&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-2 text-center",children:[e.jsx("h4",{className:"font-bold text-base text-slate-900 dark:text-white",children:"Geolocation Sync"}),e.jsx("p",{className:"text-xs text-earth-500 dark:text-earth-400",children:"Connect to regional network node."}),e.jsx("button",{onClick:()=>i(3),className:"w-full bg-agro-600 text-white font-black py-3 rounded-xl text-[9px] uppercase tracking-widest",children:"Sync Coordinates"})]}),t===3&&e.jsxs("div",{className:"text-center py-4 animate-in zoom-in",children:[e.jsx(B,{size:40,className:"text-green-500 mx-auto mb-3"}),e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:"ESIN Issued"}),e.jsx("p",{className:"font-mono text-base text-agro-600 font-bold mb-6",children:r}),e.jsx("button",{onClick:l,className:"w-full bg-agro-900 text-white font-black py-3 rounded-xl text-[9px] uppercase tracking-widest",children:"View Digital ID"})]})]})]})})},we=({user:t})=>e.jsx("div",{className:"max-w-md mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"bg-white dark:bg-earth-900 p-6 rounded-[2rem] shadow-sm border border-earth-100 dark:border-earth-800",children:[e.jsxs("h3",{className:"font-bold text-earth-900 dark:text-white mb-6 flex items-center gap-2 text-sm uppercase tracking-widest",children:[e.jsx(q,{size:18,className:"text-agro-600"})," Digital ID"]}),t?e.jsxs("div",{className:"w-full bg-gradient-to-br from-agro-800 to-agro-950 rounded-2xl overflow-hidden shadow-xl relative text-white aspect-[1.58/1] p-5",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("img",{src:"https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=400",className:"w-full h-full object-cover",alt:"ID"})}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{size:20,className:"text-agro-400"}),e.jsx("span",{className:"font-serif font-bold tracking-tight text-base",children:"EnvirosAgro"})]}),e.jsx("div",{className:"bg-white/10 p-1.5 rounded-lg border border-white/10 backdrop-blur-sm",children:e.jsx(W,{size:18})})]}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl p-1 overflow-hidden shadow-lg",children:t.avatar?e.jsx("img",{src:t.avatar,className:"w-full h-full object-cover rounded-lg",alt:"Avatar"}):e.jsx("div",{className:"w-full h-full bg-agro-100 flex items-center justify-center rounded-lg text-agro-600 font-bold",children:t.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold truncate max-w-[180px]",children:t.name}),e.jsx("p",{className:"text-[9px] text-agro-300 font-black uppercase tracking-widest",children:t.role}),e.jsx("p",{className:"font-mono text-[10px] text-agro-100 tracking-widest mt-1",children:t.esin||"EA-PENDING-2024"})]})]})]}):e.jsxs("div",{className:"py-12 text-center bg-earth-50 dark:bg-earth-800/30 rounded-2xl border-2 border-dashed border-earth-200 dark:border-earth-700",children:[e.jsx(_,{size:32,className:"mx-auto text-earth-300 mb-2 opacity-50"}),e.jsx("p",{className:"text-earth-400 font-bold uppercase tracking-widest text-[8px]",children:"Sign In to view ID"})]})]})}),ye=({user:t,onGroupRegistered:i})=>{const[d,c]=s.useState(""),[r,l]=s.useState("Group"),[a,n]=s.useState(""),[x,h]=s.useState(!1),[p,u]=s.useState(null),j=async o=>{if(o.preventDefault(),h(!0),u(null),!d||!r||!a){u("All fields are required."),h(!1);return}try{await G(C(k,"groups"),{name:d,type:r,legalId:a,createdBy:t.email,createdAt:new Date,members:[t.email]}),i()}catch(m){m instanceof Error&&u(m.message),console.error(m)}finally{h(!1)}};return e.jsxs("div",{className:"p-8 bg-white dark:bg-earth-900 rounded-3xl shadow-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-agro-900 dark:text-white mb-2",children:"Register a New Group"}),e.jsx("p",{className:"text-earth-500 dark:text-earth-400 mb-6",children:"Create a new group, society, or club on the EnvirosAgro network."}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50 rounded-xl text-red-600 dark:text-red-400 text-sm",children:p}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-earth-600 dark:text-earth-300",children:"Group Name"}),e.jsx("input",{type:"text",value:d,onChange:o=>c(o.target.value),className:"w-full mt-2 bg-earth-100 dark:bg-earth-800 border-2 border-transparent focus:border-agro-500 rounded-xl py-3 px-4 focus:outline-none transition-all dark:text-white",placeholder:"e.g., 'Future Farmers of America'"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-earth-600 dark:text-earth-300",children:"Group Type"}),e.jsxs("select",{value:r,onChange:o=>l(o.target.value),className:"w-full mt-2 bg-earth-100 dark:bg-earth-800 border-2 border-transparent focus:border-agro-500 rounded-xl py-3 px-4 focus:outline-none transition-all dark:text-white",children:[e.jsx("option",{value:"Group",children:"Group"}),e.jsx("option",{value:"Society",children:"Society"}),e.jsx("option",{value:"Club",children:"Club"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-earth-600 dark:text-earth-300",children:"Legal Registration ID"}),e.jsx("input",{type:"text",value:a,onChange:o=>n(o.target.value),className:"w-full mt-2 bg-earth-100 dark:bg-earth-800 border-2 border-transparent focus:border-agro-500 rounded-xl py-3 px-4 focus:outline-none transition-all dark:text-white",placeholder:"e.g., '123-456-7890'"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-agro-600 hover:bg-agro-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all",children:x?e.jsx(N,{className:"animate-spin",size:20}):e.jsxs(e.Fragment,{children:["Register Group ",e.jsx(D,{size:18})]})})]})]})},ke=({user:t,onClose:i,onPostCreated:d})=>{const[c,r]=s.useState(""),[l,a]=s.useState(null),[n,x]=s.useState("text"),[h,p]=s.useState(""),[u,j]=s.useState(!1),[o,m]=s.useState(null),g=b=>{if(b.target.files&&b.target.files[0]){const f=b.target.files[0];a(f),f.type.startsWith("image/")?x("image"):x("text")}},L=async b=>{if(b.preventDefault(),!t){m("User not found. Please log in again.");return}if(!c.trim()){m("Post content cannot be empty.");return}j(!0),m(null);try{let f="";if(l){const R=de(F,`posts/${t.email}/${Date.now()}_${l.name}`),P=await ce(R,l);f=await xe(P.ref)}await G(C(k,"posts"),{authorName:t.name,authorEmail:t.email,authorAvatar:t.avatar||null,text:c,type:n,attachmentUrl:f,linkUrl:n==="link"?h:"",timestamp:he(),likes:0,comments:[]}),d(),i()}catch(f){m("Failed to create post. Please try again."),console.error(f)}finally{j(!1)}};return t?e.jsxs("div",{className:"bg-white dark:bg-earth-900 rounded-3xl shadow-2xl w-full max-w-2xl p-8 relative",children:[e.jsx("button",{onClick:i,className:"absolute top-6 right-6 text-earth-400 hover:text-red-500 transition-colors",children:e.jsx(Y,{size:24})}),e.jsx("h2",{className:"text-2xl font-bold text-agro-900 dark:text-white mb-6",children:"Create a New Post"}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsx("textarea",{value:c,onChange:b=>r(b.target.value),placeholder:`What's on your mind, ${t.name}?`,className:"w-full h-32 bg-earth-50 dark:bg-earth-800 rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-agro-500 dark:text-white transition",required:!0}),n==="link"&&e.jsx("input",{type:"url",value:h,onChange:b=>p(b.target.value),placeholder:"Enter URL...",className:"w-full bg-earth-100 dark:bg-earth-800 rounded-xl p-3 px-4 focus:outline-none focus:ring-2 focus:ring-agro-500 dark:text-white"}),l&&e.jsxs("div",{className:"text-sm text-earth-500 dark:text-earth-400",children:["Attached: ",l.name]}),o&&e.jsx("p",{className:"text-red-500 text-sm",children:o}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer p-3 rounded-full hover:bg-earth-100 dark:hover:bg-earth-800 text-earth-500 dark:text-earth-400 transition-colors",children:[e.jsx(K,{size:20}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:g})]}),e.jsx("button",{type:"button",onClick:()=>x("image"),className:`p-3 rounded-full hover:bg-earth-100 dark:hover:bg-earth-800 ${n==="image"?"text-agro-600":"text-earth-500 dark:text-earth-400"}`,children:e.jsx(Q,{size:20})}),e.jsx("button",{type:"button",onClick:()=>x("link"),className:`p-3 rounded-full hover:bg-earth-100 dark:hover:bg-earth-800 ${n==="link"?"text-agro-600":"text-earth-500 dark:text-earth-400"}`,children:e.jsx(X,{size:20})})]}),e.jsx("button",{type:"submit",disabled:u,className:"bg-agro-600 hover:bg-agro-700 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center justify-center gap-2 transition-all disabled:bg-earth-300",children:u?e.jsx(N,{className:"animate-spin",size:20}):"Post"})]})]})]}):e.jsx("div",{className:"bg-white dark:bg-earth-900 rounded-3xl shadow-2xl w-full max-w-2xl p-8 relative flex items-center justify-center h-96",children:e.jsx(N,{className:"animate-spin text-agro-500",size:48})})},Me=({user:t,onNavigate:i})=>{var m;const[d,c]=s.useState(1),[r,l]=s.useState("feed"),[a,n]=s.useState(t),[x,h]=s.useState(!1),[p,u]=s.useState(!1),j=g=>{a&&n({...a,esin:g})},o=[{id:"feed",label:"News Feed",icon:e.jsx(te,{size:18})},{id:"forum",label:"Discussion Forum",icon:e.jsx(v,{size:18})},{id:"get-esin",label:"ESIN Registry",icon:e.jsx(ae,{size:18})},{id:"events",label:"Ecosystem Events",icon:e.jsx(se,{size:18})}];return e.jsxs("div",{className:"bg-white dark:bg-earth-950 min-h-screen",children:[e.jsx(me,{}),e.jsx("div",{className:"max-w-[1600px] mx-auto px-6 py-12",children:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-12",children:[e.jsxs("aside",{className:"xl:w-[380px] space-y-8",children:[e.jsxs("div",{className:"bg-earth-50 dark:bg-earth-900 rounded-[2.5rem] p-8 border border-earth-100 dark:border-earth-800 shadow-sm overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 -rotate-12",children:e.jsx(S,{size:160})}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-earth-400 mb-8",children:"Personal Hub"}),e.jsx(we,{user:a}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-earth-100 dark:border-earth-800 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white dark:bg-earth-800 rounded-2xl shadow-inner",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-earth-400 block mb-1",children:"EAC Rank"}),e.jsx("span",{className:"text-xl font-black text-agro-600",children:"#42"})]}),e.jsxs("div",{className:"text-center p-4 bg-white dark:bg-earth-800 rounded-2xl shadow-inner",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-earth-400 block mb-1",children:"Impact pts"}),e.jsx("span",{className:"text-xl font-black text-blue-600",children:"1.2k"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-earth-900 rounded-[2.5rem] p-8 border border-earth-100 dark:border-earth-800 shadow-sm",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-earth-400 mb-8",children:"Navigation"}),e.jsx("div",{className:"space-y-3",children:o.map(g=>e.jsxs("button",{onClick:()=>l(g.id),className:`w-full py-4 px-6 rounded-2xl text-left font-bold transition-all flex items-center gap-4 group ${r===g.id?"bg-agro-600 text-white shadow-xl shadow-agro-600/20 translate-x-2":"text-earth-500 hover:bg-earth-50 dark:hover:bg-earth-800"}`,children:[e.jsx("span",{className:`${r===g.id?"text-white":"text-earth-300 group-hover:text-agro-500"} transition-colors`,children:g.icon}),e.jsx("span",{className:"text-sm uppercase tracking-widest",children:g.label})]},g.id))})]}),e.jsx(be,{})]}),e.jsxs("main",{className:"flex-1 space-y-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center justify-between",children:[e.jsxs("div",{className:"relative group w-full sm:w-96",children:[e.jsx(Z,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-earth-300 group-focus-within:text-agro-500 transition-colors",size:20}),e.jsx("input",{type:"text",placeholder:"Search posts, topics, members...",className:"w-full bg-earth-50 dark:bg-earth-900 border border-earth-100 dark:border-earth-800 rounded-[2rem] pl-16 pr-6 py-5 text-base font-bold focus:outline-none focus:ring-8 focus:ring-agro-500/5 transition-all dark:text-white"})]}),e.jsxs("div",{className:"flex gap-4 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex-1 sm:flex-none flex items-center justify-center gap-3 bg-earth-900 dark:bg-white text-white dark:text-earth-900 px-8 py-5 rounded-[1.8rem] text-[10px] font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl",children:[e.jsx(z,{size:18})," Create Post"]}),((m=a==null?void 0:a.role)==null?void 0:m.toLowerCase().includes("organization"))&&e.jsxs("button",{onClick:()=>h(!0),className:"flex-1 sm:flex-none flex items-center justify-center gap-3 bg-agro-500 dark:bg-agro-600 text-white px-8 py-5 rounded-[1.8rem] text-[10px] font-black uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-xl",children:[e.jsx(z,{size:18})," Register Group"]}),e.jsxs("button",{className:"p-5 bg-earth-50 dark:bg-earth-900 rounded-[1.5rem] border border-earth-100 dark:border-earth-800 text-earth-400 hover:text-agro-600 transition-all relative",children:[e.jsx(ee,{size:22}),e.jsx("span",{className:"absolute top-4 right-4 w-2.5 h-2.5 bg-red-500 rounded-full border-4 border-earth-50 dark:border-earth-900"})]})]})]}),e.jsx(w,{children:p&&e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4",children:e.jsx(ke,{user:a,onClose:()=>u(!1),onPostCreated:()=>{}})})}),e.jsx(w,{children:x&&e.jsx(y.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4",children:e.jsx(ye,{user:a,onGroupRegistered:()=>h(!1)})})}),e.jsxs("div",{className:"animate-in fade-in duration-700",children:[r==="feed"&&e.jsxs("div",{className:"space-y-12",children:[e.jsx(fe,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx(T,{}),e.jsx(ve,{})]})]}),r==="forum"&&e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"bg-blue-600 p-10 rounded-[3rem] text-white flex flex-col md:flex-row items-center justify-between gap-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 rotate-12",children:e.jsx(v,{size:200})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-3xl font-serif font-black mb-2",children:"Ecosystem Dialogues"}),e.jsx("p",{className:"text-blue-100 font-medium",children:"Join 2,400+ peers in technical and strategic agricultural discourse."})]}),e.jsx("button",{className:"relative z-10 bg-white text-blue-600 px-8 py-4 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-xl hover:bg-blue-50 transition-all",children:"Start New Topic"})]}),e.jsx(ue,{})]}),r==="get-esin"&&e.jsx(Ne,{esinStep:d,setEsinStep:c,setActiveTab:l,onEsinGenerated:j}),r==="events"&&e.jsxs("div",{className:"space-y-12",children:[e.jsx(T,{}),e.jsxs("div",{className:"bg-earth-900 p-12 rounded-[4rem] text-white text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1540575861501-7ce0e22432c9?w=1600')] bg-cover bg-center opacity-20"}),e.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[e.jsx("div",{className:"ea-label-meta justify-center mb-6 text-agro-400",children:"Annual Flagship Event"}),e.jsx("h2",{className:"text-5xl font-serif font-black mb-6",children:"ScaleUp Summit 2024"}),e.jsx("p",{className:"text-lg text-earth-300 font-medium italic mb-10",children:'"Resilience at Scale: Bridging the Gap between Professional Knowledge and Industrial Output."'}),e.jsx("button",{onClick:()=>i(A.SCALEUP_SUMMIT),className:"bg-agro-600 text-white px-12 py-5 rounded-2xl font-black uppercase text-xs tracking-[0.2em] shadow-2xl shadow-agro-600/40 hover:bg-agro-500 hover:scale-105 active:scale-95 transition-all",children:"Registration & Access Portal"})]})]})]})]})]})]})}),!a&&e.jsx(re,{title:"Join the Global Network",subtitle:"Secure your ESIN and unlock access to the full EnvirosAgro ecosystem and community intelligence.",buttonText:"Register Intelligence Node",onClick:()=>i(A.SIGN_UP)})]})};export{Me as default};
